---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import ArticleCard from "../components/ArticleCard.astro";

const posts = (await getCollection("blog")).filter(p => !p.data.draft)
  .sort((a,b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 6);
---

<BaseLayout
  title="Nova Raiz — do caos urbano ao essencial"
  description="Planejamento financeiro, trabalho remoto e vida real no interior. Uma transição consciente, sem impulso."
>
  <section class="py-10 md:py-14">
    <div class="grid gap-8 md:grid-cols-2 md:items-center">
      <div>
        <h1 class="text-4xl md:text-5xl leading-tight" style="font-family:'Playfair Display', serif;">
          Uma nova vida não começa com uma mudança. Começa com um plano.
        </h1>
        <p class="mt-4 text-lg leading-relaxed" style="color: var(--muted);">
          Planejamento financeiro, trabalho remoto e vida real no interior — para você fazer a transição com consciência, não por fuga.
        </p>

        <div class="mt-6 flex flex-wrap gap-3">
          <a class="rounded-xl px-5 py-3 font-semibold" style="background: var(--primary); color: white;"
             href="/comece-aqui">Comece por aqui</a>
          <a class="rounded-xl px-5 py-3 font-semibold border"
             style="border-color: var(--border);" href="/mudar-para-o-interior-guia-definitivo">
             Guia definitivo
          </a>
        </div>
      </div>

      <div class="rounded-3xl border p-6 md:p-8"
           style="border-color: var(--border); background: var(--card);">
        <div class="text-sm font-semibold" style="color: var(--muted);">Trilha da transição</div>
        <div class="mt-4 grid gap-3">
          {[
            { t: "Guia definitivo", d: "o mapa completo do começo ao fim", href: "/mudar-para-o-interior-guia-definitivo" },
            { t: "Decisão", d: "clareza sem romantizar", href: "/blog/vale-a-pena-sair-da-capital" },
            { t: "Planejamento", d: "custos, simulações, reserva", href: "/planejamento" },
            { t: "Execução", d: "internet, cidade, adaptação", href: "/checklist" },
          ].map(i => (
            <a href={i.href} class="rounded-2xl border p-4 hover:opacity-90"
               style="border-color: var(--border); background: var(--surface);">
              <div class="font-semibold">{i.t}</div>
              <div class="text-sm mt-1" style="color: var(--muted);">{i.d}</div>
            </a>
          ))}
        </div>
      </div>
    </div>
  </section>

  <section class="py-2">
    <div class="rounded-3xl border p-6 md:p-8"
         style="border-color: var(--border); background: var(--surface);">
      <div class="grid gap-6 md:grid-cols-2 md:items-center">
        <div>
          <div class="text-sm font-semibold" style="color: var(--muted);">Comece pelo mapa</div>
          <h2 class="mt-2 text-2xl md:text-3xl" style="font-family:'Playfair Display', serif;">
            O Guia Definitivo da Mudança para o Interior
          </h2>
          <p class="mt-3 text-sm leading-relaxed" style="color: var(--muted);">
            Um índice-mestre com custo real, cidade certa, internet, trabalho remoto, checklist e plano de execução —
            tudo conectado para você nunca se perder.
          </p>
          <div class="mt-5 flex flex-wrap gap-3">
            <a class="inline-flex items-center rounded-xl px-5 py-3 text-sm font-semibold"
               style="background: var(--accent); color: var(--text);"
               href="/mudar-para-o-interior-guia-definitivo">
              Abrir o Guia definitivo
            </a>
            <a class="inline-flex items-center rounded-xl px-5 py-3 text-sm font-semibold border"
               style="border-color: var(--border);"
               href="/blog/quanto-custa-mudar-para-o-interior">
              Ver simulação (3 cenários)
            </a>
          </div>
        </div>

        <div class="rounded-2xl border p-5"
             style="border-color: var(--border); background: var(--card);">
          <div class="text-sm font-semibold" style="color: var(--muted);">Dentro do guia</div>
          <ul class="mt-3 space-y-2 text-sm" style="color: var(--muted);">
            <li>• Quanto custa (mudança + adaptação + mensal)</li>
            <li>• Checklist completo (decidir → planejar → executar)</li>
            <li>• Como escolher a cidade certa</li>
            <li>• Trabalho remoto e internet no interior</li>
            <li>• Plano B e riscos (sem romantizar)</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <section class="py-8">
    <div class="flex items-end justify-between gap-4">
      <h2 class="text-2xl md:text-3xl" style="font-family:'Playfair Display', serif;">Comece pelos pilares</h2>
      <a class="text-sm underline" href="/blog" style="color: var(--muted);">Ver todos</a>
    </div>

    <div class="mt-6 grid gap-4 md:grid-cols-3">
      {posts.map(p => <ArticleCard post={p} />)}
    </div>
  </section>

  <section class="py-8">
    <div class="rounded-3xl border p-6 md:p-8"
         style="border-color: var(--border); background: var(--card);">
      <div class="grid gap-6 md:grid-cols-2 md:items-center">
        <div>
          <h2 class="text-2xl md:text-3xl" style="font-family:'Playfair Display', serif;">
            Um e-mail por semana. Um passo por vez.
          </h2>
          <p class="mt-3 text-base leading-relaxed" style="color: var(--muted);">
            Se você sente que a cidade está te sugando, eu mando um e-mail com uma ideia prática e uma tarefa simples para avançar na transição.
          </p>
        </div>
        <form class="flex flex-col sm:flex-row gap-3">
          <input class="w-full rounded-xl border px-4 py-3 text-sm"
                 style="border-color: var(--border); background: var(--surface);"
                 type="email" placeholder="Seu melhor e-mail" />
          <button class="rounded-xl px-5 py-3 text-sm font-semibold"
                  style="background: var(--accent); color: var(--text);" type="button">
            Quero receber
          </button>
        </form>
      </div>
    </div>
  </section>
</BaseLayout>
