---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { COMPARATIVAS } from "../../data/comparativas";

const title = "Comparativas definitivas de cidades — Nova Raiz";
const description = "Hub de comparativas em formato de artigos completos (Sudeste, Sul, Centro-Oeste, Nordeste e Norte) com foco em bairros, internet, custo de vida e vida real.";

const byRegion = (uf) => {
  const map = {
    "SP":"Sudeste","RJ":"Sudeste","MG":"Sudeste","ES":"Sudeste","DF":"Centro-Oeste","GO":"Centro-Oeste","MT":"Centro-Oeste","MS":"Centro-Oeste",
    "PR":"Sul","SC":"Sul","RS":"Sul",
    "BA":"Nordeste","CE":"Nordeste","PE":"Nordeste","PB":"Nordeste","RN":"Nordeste","AL":"Nordeste","SE":"Nordeste","MA":"Nordeste","PI":"Nordeste",
    "AM":"Norte","PA":"Norte","RO":"Norte","RR":"Norte","AP":"Norte","TO":"Norte","AC":"Norte"
  };
  return map[uf] || "Brasil";
};

const groups = COMPARATIVAS.reduce((acc, item) => {
  const r = byRegion(item.a.uf);
  acc[r] ||= [];
  acc[r].push(item);
  return acc;
}, /** @type {Record<string, typeof COMPARATIVAS>} */ ({}));

const order = ["Sudeste","Sul","Centro-Oeste","Nordeste","Norte","Brasil"];
const orderedKeys = Object.keys(groups).sort((a,b)=> order.indexOf(a)-order.indexOf(b));
---

<BaseLayout title={title} description={description}>
  <section class="py-10 md:py-14">
    <div class="mx-auto max-w-5xl">
      <nav class="text-xs" style="color: var(--muted);">
        <a class="underline" href="/">Home</a>
        <span class="mx-2">/</span>
        <span>Comparativas</span>
      </nav>

      <h1 class="mt-4 text-4xl md:text-5xl" style="font-family:'Playfair Display', serif;">Comparativas definitivas de cidades</h1>
      <p class="mt-4 text-lg" style="color: var(--muted);">
        Cluster Brasil: <b>50 comparativas</b> com foco em <b>bairro</b>, <b>internet</b>, <b>custo total</b> e <b>vida real</b>.
      </p>

      <div class="mt-8 grid gap-6 md:grid-cols-2">
        <div class="rounded-3xl border p-6" style="border-color: var(--border); background: var(--card);">
          <div class="text-sm font-semibold">Como usar (modo “decisão em 7 dias”)</div>
          <ol class="mt-4 list-decimal pl-5 space-y-2 text-sm" style="color: var(--muted);">
            <li>Abra 2–3 comparativas da sua região.</li>
            <li>Escolha 2 bairros por cidade (um “vida a pé” e um “condomínio”).</li>
            <li>Faça visita-teste: internet + rotas + mercado + saúde.</li>
            <li>Finalize no checklist e no Guia Definitivo.</li>
          </ol>
          <div class="mt-5 text-sm">
            <a class="underline" href="/comparador/">Usar o Comparador</a>
            <span class="mx-2" style="color: var(--muted);">•</span>
            <a class="underline" href="/checklist/">Checklist</a>
          </div>
        </div>

        <div class="rounded-3xl border p-6" style="border-color: var(--border); background: var(--surface);">
          <div class="text-sm font-semibold">Por que isso ranqueia</div>
          <ul class="mt-4 list-disc pl-5 space-y-2 text-sm" style="color: var(--muted);">
            <li>Intenção clara (“A vs B”) + estrutura repetível (Google entende rápido).</li>
            <li>Links internos para guias pilares (efeito “cadeia de autoridade”).</li>
            <li>Escalável: você enriquece as páginas com dados e bairros com o tempo.</li>
          </ul>
          <div class="mt-5 text-xs" style="color: var(--muted);">
            Dica: páginas já vêm com schema (Breadcrumb + FAQ + HowTo) e tabelas comparativas.
          </div>
        </div>
      </div>

      <div class="mt-10 space-y-10">
        {orderedKeys.map((key) => (
          <div>
            <h2 class="text-2xl font-semibold">{key}</h2>
            <div class="mt-4 grid gap-3 md:grid-cols-2">
              {groups[key].map((c) => (
                <a class="rounded-2xl border p-4 hover:opacity-90 transition" style="border-color: var(--border); background: var(--card);"
                   href={`/comparativas/${c.slug}/`}>
                  <div class="text-sm font-semibold">{c.a.name} vs {c.b.name}</div>
                  <div class="mt-1 text-xs" style="color: var(--muted);">{c.description}</div>
                </a>
              ))}
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>
</BaseLayout>
