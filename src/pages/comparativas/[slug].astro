---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { COMPARATIVAS } from "../../data/comparativas";

export async function getStaticPaths() {
  return COMPARATIVAS.map((c) => ({ params: { slug: c.slug } }));
}

const { slug } = Astro.params;
const c = COMPARATIVAS.find((x) => x.slug === slug);
if (!c) throw new Error(`Comparativa não encontrada: ${slug}`);

const title = c.title;
const description = c.description;

const hasSources = c.sources && Object.values(c.sources).some((v) => (v ?? "").trim().length > 0);
const updated = c.updated;
---

<BaseLayout title={title} description={description}>
  <section class="py-10 md:py-14">
    <div class="mx-auto max-w-4xl">
      <nav class="text-xs" style="color: var(--muted);">
        <a class="underline" href="/">Home</a>
        <span class="mx-2">/</span>
        <a class="underline" href="/comparativas/">Comparativas</a>
        <span class="mx-2">/</span>
        <span>{c.a.name} vs {c.b.name}</span>
      </nav>

      <h1 class="mt-4 text-4xl md:text-5xl" style="font-family:'Playfair Display', serif;">{c.a.name} vs {c.b.name}</h1>
      <p class="mt-3 text-lg" style="color: var(--muted);">{description}</p>

      <div class="mt-6 rounded-3xl border p-5" style="border-color: var(--border); background: var(--surface);">
        <div class="text-xs" style="color: var(--muted);">Atualizado</div>
        <div class="text-sm font-semibold">{updated}</div>
      </div>

      <div class="mt-8 grid gap-6 md:grid-cols-2">
        <div class="rounded-3xl border p-6" style="border-color: var(--border); background: var(--card);">
          <div class="text-sm font-semibold">Resumo executivo</div>
          <ul class="mt-4 list-disc pl-5 space-y-2 text-sm" style="color: var(--muted);">
            <li><b>Escolha {c.a.name}</b> se você quer previsibilidade, rotina “redonda” e menor pressão urbana (dependendo do bairro).</li>
            <li><b>Escolha {c.b.name}</b> se você quer mais escala de serviços e oportunidades (com custo/ruído/trânsito potencialmente maior).</li>
            <li>O segredo quase sempre é: <b>bairro + deslocamento + internet</b>.</li>
          </ul>
        </div>

        <div class="rounded-3xl border p-6" style="border-color: var(--border); background: var(--surface);">
          <div class="text-sm font-semibold">Checklist rápido (visita-teste)</div>
          <ol class="mt-4 list-decimal pl-5 space-y-2 text-sm" style="color: var(--muted);">
            <li>Teste internet (manhã/noite/sábado).</li>
            <li>Simule rotas no horário de pico.</li>
            <li>Visite mercado, farmácia, academia e parque próximos.</li>
            <li>Converse com 2 moradores (síndico/porteiro + comerciante).</li>
          </ol>
          <div class="mt-4 text-sm">
            <a class="underline" href="/checklist/">Abrir checklist completo</a>
          </div>
        </div>
      </div>

      <div class="mt-10 space-y-10">
        <div class="rounded-3xl border p-6" style="border-color: var(--border); background: var(--card);">
          <h2 class="text-xl font-semibold">Custo de vida (o que realmente pesa)</h2>
          <p class="mt-2 text-sm" style="color: var(--muted);">
            A comparação real não é só aluguel. É moradia + condomínio + deslocamento + saúde + educação (se tiver filhos).
          </p>
          <div class="mt-4 overflow-x-auto">
            <table class="w-full text-sm">
              <thead>
                <tr style="color: var(--muted);">
                  <th class="py-2 text-left">Categoria</th>
                  <th class="py-2 text-left">{c.a.name}</th>
                  <th class="py-2 text-left">{c.b.name}</th>
                </tr>
              </thead>
              <tbody>
                {[
                  ["Aluguel 2q (bairro bom)", "R$ 1.8k–3.3k", "R$ 2.2k–4.3k"],
                  ["Condomínio", "R$ 0.4k–0.95k", "R$ 0.5k–1.25k"],
                  ["Mercado (casal)", "R$ 1.6k–2.45k", "R$ 1.85k–2.85k"],
                  ["Plano de saúde", "R$ 0.8k–1.45k", "R$ 0.9k–1.65k"],
                  ["Carro (tudo)", "R$ 0.9k–1.8k", "R$ 0.95k–1.9k"],
                ].map((row) => (
                  <tr class="border-t" style="border-color: var(--border);">
                    <td class="py-2">{row[0]}</td>
                    <td class="py-2" style="color: var(--muted);">{row[1]}</td>
                    <td class="py-2" style="color: var(--muted);">{row[2]}</td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
          <p class="mt-4 text-xs" style="color: var(--muted);">
            Nota: faixas-modelo para comparação. Para dados oficiais/mercado, use as fontes listadas quando disponíveis.
          </p>
        </div>

        <div class="rounded-3xl border p-6" style="border-color: var(--border); background: var(--surface);">
          <h2 class="text-xl font-semibold">Bairros e regiões</h2>
          <p class="mt-2 text-sm" style="color: var(--muted);">
            A cidade certa no bairro errado vira arrependimento. Use este guia como mapa mental e valide com visita-teste.
          </p>
          <div class="mt-4 grid gap-4 md:grid-cols-2">
            <div class="rounded-2xl border p-4" style="border-color: var(--border); background: var(--card);">
              <div class="text-sm font-semibold">{c.a.name}</div>
              <ul class="mt-2 list-disc pl-5 text-sm space-y-1" style="color: var(--muted);">
                <li>Eixo central ampliado (serviços a pé)</li>
                <li>Bairros familiares consolidados (melhor equilíbrio)</li>
                <li>Condomínios/expansão (previsibilidade e carro)</li>
              </ul>
            </div>
            <div class="rounded-2xl border p-4" style="border-color: var(--border); background: var(--card);">
              <div class="text-sm font-semibold">{c.b.name}</div>
              <ul class="mt-2 list-disc pl-5 text-sm space-y-1" style="color: var(--muted);">
                <li>Centro premium/urbano (vida a pé, custo maior)</li>
                <li>Regiões familiares (custo-benefício)</li>
                <li>Condomínios (padrão alto, carro obrigatório)</li>
              </ul>
            </div>
          </div>
          <div class="mt-4 text-sm">
            <a class="underline" href="/blog/melhores-cidades-interior-brasil-2026/">Ver o Guia Mestre</a>
          </div>
        </div>

        <div class="rounded-3xl border p-6" style="border-color: var(--border); background: var(--card);">
          <h2 class="text-xl font-semibold">Internet, trabalho e vida real</h2>
          <div class="mt-3 grid gap-4 md:grid-cols-2">
            <div>
              <div class="text-sm font-semibold">Internet (regra de ouro)</div>
              <p class="mt-2 text-sm" style="color: var(--muted);">
                Internet é “bairro”, não “cidade”. Teste estabilidade no imóvel e tenha plano B (coworking + 5G).
              </p>
              <div class="mt-3 text-sm"><a class="underline" href="/blog/internet-no-interior-guia-definitivo/">Guia de internet no interior</a></div>
            </div>
            <div>
              <div class="text-sm font-semibold">Trabalho e economia</div>
              <p class="mt-2 text-sm" style="color: var(--muted);">
                Se você não é 100% remoto, a cidade com maior escala tende a oferecer mais oportunidades — e cobrar isso no custo.
              </p>
            </div>
          </div>
        </div>

        {hasSources && (
          <div class="rounded-3xl border p-6" style="border-color: var(--border); background: var(--surface);">
            <h2 class="text-xl font-semibold">Fontes oficiais (quando disponíveis)</h2>
            <ul class="mt-3 list-disc pl-5 text-sm space-y-2" style="color: var(--muted);">
              {c.sources?.ibge_a && <li><a class="underline" href={c.sources.ibge_a} target="_blank" rel="noopener">IBGE — {c.a.name}</a></li>}
              {c.sources?.ibge_b && <li><a class="underline" href={c.sources.ibge_b} target="_blank" rel="noopener">IBGE — {c.b.name}</a></li>}
              {c.sources?.inep && <li><a class="underline" href={c.sources.inep} target="_blank" rel="noopener">INEP (educação)</a></li>}
              {c.sources?.datasus && <li><a class="underline" href={c.sources.datasus} target="_blank" rel="noopener">DATASUS (saúde)</a></li>}
              {c.sources?.ssp && <li><a class="underline" href={c.sources.ssp} target="_blank" rel="noopener">SSP (segurança)</a></li>}
            </ul>
          </div>
        )}

        <div class="rounded-3xl border p-6" style="border-color: var(--border); background: var(--card);">
          <h2 class="text-xl font-semibold">Próximos passos</h2>
          <ul class="mt-3 list-disc pl-5 text-sm space-y-2" style="color: var(--muted);">
            <li><a class="underline" href="/mudar-para-o-interior-guia-definitivo/">Guia definitivo da mudança</a></li>
            <li><a class="underline" href="/checklist/">Checklist completo</a></li>
            <li><a class="underline" href="/blog/melhores-cidades-interior-brasil-2026/">Guia Mestre (Brasil)</a></li>
          </ul>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
