---
import BaseLayout from "../../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog")).filter(p => !p.data.draft);
const categories = Array.from(new Set(posts.map(p => p.data.category).filter(Boolean))).sort();
---

<BaseLayout title="Categorias — Nova Raiz" description="Navegue por categorias: Planejamento, Cidades, Trabalho remoto, Vida real e Autossuficiência.">
  <section class="py-10 md:py-14">
    <h1 class="text-4xl md:text-5xl" style="font-family:'Playfair Display', serif;">Categorias</h1>
    <p class="mt-4 text-lg" style="color: var(--muted);">
      Escolha um tema e veja os artigos relacionados.
    </p>

    <div class="mt-8 grid gap-4 md:grid-cols-2">
      {categories.map((c) => (
        <a class="rounded-3xl border p-6 hover:opacity-90"
           style="border-color: var(--border); background: var(--card);"
           href={`/blog/categoria/${encodeURIComponent(String(c).toLowerCase().replace(/\s+/g,'-'))}/`}>
          <div class="text-sm font-semibold" style="color: var(--muted);">Categoria</div>
          <div class="mt-1 text-xl font-semibold">{c}</div>
          <div class="mt-2 text-sm" style="color: var(--muted);">Ver artigos →</div>
        </a>
      ))}
    </div>
  </section>
</BaseLayout>
